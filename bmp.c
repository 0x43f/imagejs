/*
File: bmp.c
Project: imagejs
Author: jklmnn
Homepage: https://https://github.com/jklmnn/imagejs
License: GNU GENERAL PUBLIC LICENSE Version 3
*/


#include "bmp.h"

char *bmp_js(char *content, int size){
	char _bmp_header[BMP_JS_HEADER] = {0x42, 0x4d, 0x3d, 0x30, 0x3b, 0x2f, 0x2f, 0x00, 0x00, 0x00, 0x7a, 0x00, 0x00, 0x00, 0x6c, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x01, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x13, 0x0b, 0x00, 0x00, 0x13, 0x0b, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x42, 0x47, 0x52, 0x73, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x0a};//, 0x2a, 0x2f, 0x3d, 0x30, 0x3b, 0x0a};
	char *buffer = (char*)malloc(BMP_JS_HEADER + size);
	for(int i = 0; i < BMP_JS_HEADER; i++){
		buffer[i] = _bmp_header[i];
	}
	for(int i = 0; i < size; i++){
		buffer[i + BMP_JS_HEADER] = content[i];
	}
	return buffer;
}

char *bmp_filename(char *fn, int size){
	char _bmp_ending[BMP_ENDING] = {0x2e, 0x62, 0x6d, 0x70, 0x00};
	char *newfile = (char*)malloc(size + BMP_ENDING);
	for(int i = 0; i < size; i++){
		newfile[i] = fn[i];
	}
	for(int i = 0; i < BMP_ENDING; i++){
		newfile[size + i] = _bmp_ending[i];
	}
	return newfile;
}
